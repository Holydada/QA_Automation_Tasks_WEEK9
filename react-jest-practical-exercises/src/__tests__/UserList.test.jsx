import {render,screen,waitFor,cleanup} from '@testing-library/react'; import UserList from '../components/UserList'; afterEach(()=>{jest.restoreAllMocks(); cleanup();}); test('renders usernames from API',async()=>{jest.spyOn(global,'fetch').mockResolvedValue({ok:true,json:async()=>([{id:1,username:'Alice'},{id:2,username:'Bob'}])}); render(<UserList/>); await waitFor(()=>expect(screen.getByText('Alice')).toBeInTheDocument()); expect(screen.getByText('Bob')).toBeInTheDocument();});
