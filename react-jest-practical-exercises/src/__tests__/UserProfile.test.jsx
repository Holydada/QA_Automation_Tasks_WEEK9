import {render,screen,waitFor} from '@testing-library/react'; import UserProfile from '../components/UserProfile'; import * as api from '../api'; jest.mock('../api'); test('shows loading then user details',async()=>{api.fetchUser.mockImplementation(async(id)=>({id,name:'Jane Doe',email:'jane@example.com'})); render(<UserProfile userId={123}/>); expect(screen.getByText('Loading...')).toBeInTheDocument(); await waitFor(()=>expect(screen.getByLabelText('name')).toHaveTextContent('Jane Doe')); expect(screen.getByLabelText('email')).toHaveTextContent('jane@example.com');});
