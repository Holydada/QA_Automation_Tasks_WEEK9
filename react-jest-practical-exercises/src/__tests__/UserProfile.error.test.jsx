import {render,screen,waitFor} from '@testing-library/react'; import UserProfile from '../components/UserProfile'; import * as api from '../api'; jest.mock('../api'); test('shows error when fetch fails',async()=>{api.fetchUser.mockImplementation(async()=>{throw new Error('Boom')}); render(<UserProfile userId={1}/>); expect(screen.getByText('Loading...')).toBeInTheDocument(); await waitFor(()=>expect(screen.getByText('Error loading user.')).toBeInTheDocument());});
